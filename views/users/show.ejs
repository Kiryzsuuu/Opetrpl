<div class="row">
  <div class="col-md-8">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2><i class="bi bi-person"></i> Detail User</h2>
      <div class="btn-group">
        <a href="/users" class="btn btn-secondary">
          <i class="bi bi-arrow-left"></i> Kembali
        </a>
        <a href="/users/<%= user._id %>/edit" class="btn btn-warning">
          <i class="bi bi-pencil"></i> Edit
        </a>
      </div>
    </div>

    <div class="card">
      <div class="card-body">
        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-person-badge"></i> Username:</strong>
          </div>
          <div class="col-md-8">
            <%= user.username %>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-envelope"></i> Email:</strong>
          </div>
          <div class="col-md-8">
            <%= user.email %>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-person"></i> Nama Lengkap:</strong>
          </div>
          <div class="col-md-8">
            <%= user.nama || '-' %>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-shield"></i> Role:</strong>
          </div>
          <div class="col-md-8">
            <% if (user.role === 'Super Admin') { %>
              <span class="badge bg-danger fs-6"><%= user.role %></span>
            <% } else if (user.role === 'Admin') { %>
              <span class="badge bg-primary fs-6"><%= user.role %></span>
            <% } else if (user.role === 'Peneliti') { %>
              <span class="badge bg-success fs-6"><%= user.role %></span>
            <% } else { %>
              <span class="badge bg-info fs-6"><%= user.role %></span>
            <% } %>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-toggle-on"></i> Status:</strong>
          </div>
          <div class="col-md-8">
            <span class="badge <%= user.status === 'Aktif' ? 'bg-success' : 'bg-secondary' %> fs-6"><%= user.status || '-' %></span>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-telephone"></i> Nomor Telepon:</strong>
          </div>
          <div class="col-md-8">
            <%= user.noTelepon || '-' %>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-geo-alt"></i> Alamat:</strong>
          </div>
          <div class="col-md-8">
            <%= user.alamat || '-' %>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-calendar-plus"></i> Dibuat:</strong>
          </div>
          <div class="col-md-8">
            <%= new Date(user.createdAt).toLocaleString('id-ID', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric',
              hour: '2-digit',
              minute: '2-digit'
            }) %>
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-4">
            <strong><i class="bi bi-calendar-check"></i> Update Terakhir:</strong>
          </div>
          <div class="col-md-8">
            <%= new Date(user.updatedAt).toLocaleString('id-ID', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric',
              hour: '2-digit',
              minute: '2-digit'
            }) %>
          </div>
        </div>

        <hr class="my-4">

        <div class="d-grid gap-2 d-md-flex justify-content-md-between">
          <a href="/users" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Kembali ke Daftar
          </a>
          
          <div class="btn-group">
            <a href="/users/<%= user._id %>/edit" class="btn btn-warning">
              <i class="bi bi-pencil"></i> Edit
            </a>
            
            <% if (locals.currentUser && user._id.toString() !== currentUser._id.toString()) { %>
              <form action="/users/<%= user._id %>/toggle-status?_method=POST" method="POST" class="d-inline">
                <button type="submit" class="btn <%= user.status === 'Aktif' ? 'btn-secondary' : 'btn-success' %>"
                        onclick="return confirm(`<%= user.status === 'Aktif' ? 'Yakin menonaktifkan user ini?' : 'Yakin mengaktifkan user ini?' %>`)"
                >
                  <i class="bi bi-<%= user.status === 'Aktif' ? 'toggle-off' : 'toggle-on' %>"></i>
                  <%= user.status === 'Aktif' ? 'Nonaktifkan' : 'Aktifkan' %>
                </button>
              </form>
              
              <form action="/users/<%= user._id %>?_method=DELETE" method="POST" class="d-inline">
                <button type="submit" class="btn btn-danger"
                        onclick="return confirm(`Yakin ingin menghapus user ini? Data tidak dapat dikembalikan.`)">
                  <i class="bi bi-trash"></i> Hapus
                </button>
              </form>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
